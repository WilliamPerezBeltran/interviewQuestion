(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-CollapseAnswerSection"],{"+/tN":function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswersSection_question",selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:"Network",kind:"LinkedField",name:"network",plural:!1,selections:[e,n,{alias:"collapseReasonsUrl",args:[{kind:"Literal",name:"name",value:"collapse_reasons"}],kind:"ScalarField",name:"linkUrl",storageKey:'linkUrl(name:"collapse_reasons")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"numOfCollapsedAnswers",storageKey:null},{alias:null,args:null,concreteType:"Answer",kind:"LinkedField",name:"collapsedAnswers",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"aid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisibleToViewer",storageKey:null}],storageKey:null}],type:"Question",abstractKey:null}}();t.hash="ea6ff95f7711fda4802b01e3bd193117",n["default"]=t},"+c4W":function(e,n,a){var t=a("711d"),r=a("4/ic"),l=a("9ggG"),s=a("9Nap");e.exports=function(e){return l(e)?t(s(e)):r(e)}},"4/ic":function(e,n,a){var t=a("ZWtO");e.exports=function(e){return function(n){return t(n,e)}}},"4sDh":function(e,n,a){var t=a("4uTw"),r=a("03A+"),l=a("Z0cm"),s=a("wJg7"),o=a("shjB"),i=a("9Nap");e.exports=function(e,n,a){for(var u=-1,c=(n=t(n,e)).length,d=!1;++u<c;){var m=i(n[u]);if(!(d=null!=e&&a(e,m)))break;e=e[m]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&o(c)&&s(m,c)&&(l(e)||r(e))}},"4uTw":function(e,n,a){var t=a("Z0cm"),r=a("9ggG"),l=a("GNiM"),s=a("dt0z");e.exports=function(e,n){return t(e)?e:r(e,n)?[e]:l(s(e))}},"711d":function(e,n){e.exports=function(e){return function(n){return null==n?undefined:n[e]}}},"8Nv5":function(e,n,a){"use strict";a.d(n,"b",(function(){return Z}));var t,r,l=a("jufJ"),s=a("06DM"),o=a("RA+f"),i=a("VyO/"),u=a("nwxp"),c=a("mF64"),d=a("bNQv"),m=a.n(d),f=a("bt/X"),p=a.n(f),w=a("q1tI"),g=a.n(w),v=a("J4zp"),h=a.n(v),b=a("B4US"),y=a("Cwlx"),S=a("dcv6"),k=a("VwvB"),A=a("AFGi"),C=a("3wQG"),F=a("OP/U"),O=a("DZj6"),j=a("AaDK"),x=a("FuLD"),E=a("0UDP"),K=a("ZeiD");const _=e=>{let n=e.answer,l=e.viewer;const s=Object(E.useFragment)(void 0!==t?t:t=a("w8Tj"),n),o=s.content,i=s.aid,u=!!o&&Object(A.C)(JSON.parse(o),C.b),c=u?S.a.Expanded:S.a.Truncated,d=Object(w.useState)(u),m=h()(d,2),f=m[0],p=m[1],v=Object(w.useState)(!1),_=h()(v,2),N=_[0],q=_[1],D=Object(w.useCallback)(()=>p(!0),[]),I=Object(w.useCallback)(()=>{q(e=>!e),Object(j.a)("comments_toggled",{object_id:i,comment_type:"answer"})},[i]),T=Object(E.useFragment)(void 0!==r?r:r=a("izyJ"),l);return g.a.createElement(K.a,null,g.a.createElement(k.a,{hasActionBar:!0},g.a.createElement(F.b,{isEnabledOnLoad:!u},g.a.createElement(b.a,{viewer:T,answer:s,updateExpansionStateHandler:D,initialExpansionState:c,showFooter:f,showQuestionTitle:!1,showActionBar:Object(x.a)(),answerCommentToggleHandler:I}))),g.a.createElement(O.a,{shouldShow:N},g.a.createElement(y.a,{commentableNodeId:s.id,isBorderAll:!1})))};_.displayName="CollapsedAnswerItem";var N,q,D=_,I=a("v2f1");const T=e=>{switch(e){case I.a.tribeRemovalHard:return"Answers that have been removed from this Space";case I.a.duplicateAuthorHard:return"Answers that are duplicates";case I.a.flaggedNameHard:return"Answers that have an unverified author";case I.a.none:case I.a.lowAnswerScoreSoft:case I.a.manualCollapsedSoft:case I.a.highGraySpamScoreSoft:case I.a.moderationSoft:case I.a.moderationHard:return"Answers that need improvement";default:return""}},Z=(e,n)=>{const a=Object(c.g)().top_ans;return(!a||e.toString()!==a)&&n},J=e=>{let n=e.question,a=e.viewer;const t=[],r=n.collapsedAnswers,i=p()(r,e=>T(e.topCollapsedReason||0));return m()(i,(e,n)=>{const r=e[0].topCollapsedReason||0;t.push(g.a.createElement(o.e,{key:e[0].aid},g.a.createElement(s.b,{titleText:Object(l.plaintextTranslate)(T(r)),includePageMargin:!Object(u.c)(),borderBottom:!1,inCard:!1}),e.map(e=>Z(e.aid,e.isVisibleToViewer)&&g.a.createElement(D,{key:e.aid,answer:e,viewer:a}))))}),g.a.createElement(g.a.Fragment,null,t)};J.displayName="CollapsedAnswersSectionInner",J.fragments={question:void 0!==N?N:N=a("Qqz5"),viewer:void 0!==q?q:q=a("J9KJ")};n.a=Object(i.b)(J)},"9Nap":function(e,n,a){var t=a("/9aa");e.exports=function(e){if("string"==typeof e||t(e))return e;var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},"9ggG":function(e,n,a){var t=a("Z0cm"),r=a("/9aa"),l=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,n){if(t(e))return!1;var a=typeof e;return!("number"!=a&&"symbol"!=a&&"boolean"!=a&&null!=e&&!r(e))||(s.test(e)||!l.test(e)||null!=n&&e in Object(n))}},CMye:function(e,n,a){var t=a("GoyQ");e.exports=function(e){return e===e&&!t(e)}},GDhZ:function(e,n,a){var t=a("wF/u"),r=a("mwIZ"),l=a("hgQt"),s=a("9ggG"),o=a("CMye"),i=a("IOzZ"),u=a("9Nap");e.exports=function(e,n){return s(e)&&o(n)?i(u(e),n):function(a){var s=r(a,e);return s===undefined&&s===n?l(a,e):t(n,s,3)}}},GNiM:function(e,n,a){var t=a("I01J"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,s=t((function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(r,(function(e,a,t,r){n.push(t?r.replace(l,"$1"):a||e)})),n}));e.exports=s},I01J:function(e,n,a){var t=a("44Ds");e.exports=function(e){var n=t(e,(function(e){return 500===a.size&&a.clear(),e})),a=n.cache;return n}},IOzZ:function(e,n){e.exports=function(e,n){return function(a){return null!=a&&(a[e]===n&&(n!==undefined||e in Object(a)))}}},J9KJ:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswersSectionInner_viewer",selections:[{args:null,kind:"FragmentSpread",name:"CollapsedAnswerItem_viewer"}],type:"Viewer",abstractKey:null,hash:"209057524df02dd2b6ce34c788df9a0e"};n["default"]=t},JD84:function(e,n,a){var t=a("SKAX");e.exports=function(e,n,a,r){return t(e,(function(e,t,l){n(r,e,a(e),l)})),r}},Juji:function(e,n){e.exports=function(e,n){return null!=e&&n in Object(e)}},LUMq:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswersSection_viewer",selections:[{args:null,kind:"FragmentSpread",name:"CollapsedAnswersSectionInner_viewer"}],type:"Viewer",abstractKey:null,hash:"fbd80640dc84ab7920ed3884c412ef9c"};n["default"]=t},Mwaj:function(e,n,a){"use strict";a.r(n);var t,r,l=a("vfSt"),s=a("6ij1"),o=a("NL3F"),i=a("Pam5"),u=a("jufJ"),c=a("td6z"),d=a("RA+f"),m=a("8lmh"),f=a("VyO/"),p=a("nwxp"),w=a("FuLD"),g=a("UyMh"),v=a("q1tI"),h=a.n(v),b=a("8Nv5");class y extends h.a.Component{constructor(e){super(e),this.state={showList:!1,loadedQuery:null}}componentDidMount(){y.queries.loadCollapsedAnswersSectionContent.loadQuery().then(e=>{this.setState({loadedQuery:e})})}showCollapsedAnswer(e,n){return Object(m.tempFailureInvariant)(e,"question is "+e),h.a.createElement(b.a,{viewer:n,question:e})}onShowCollapsedAnswersClick(e){Object(p.f)()?Object(g.c)(e+"/mobile_collapsed"):this.setState({showList:!0})}render(){const e=this.props,n=e.question,a=e.qid,t=e.viewer,r=n.network,l=n.url,f=n.collapsedAnswers;let v=n.numOfCollapsedAnswers;const y=r.collapseReasonsUrl;return Object(m.tempFailureInvariant)(f,"question.collapsedAnswers is empty: "+f),f.forEach(e=>{Object(b.b)(e.aid,e.isVisibleToViewer)||(v-=1)}),Object(w.a)()&&v>0&&h.a.createElement(h.a.Fragment,null,this.state.showList&&this.state.loadedQuery&&h.a.createElement(i.a,{query:this.state.loadedQuery,variables:{qid:a},loading:h.a.createElement(c.c,null)},e=>{let n=e.question;return this.showCollapsedAnswer(n,t)}),!this.state.showList&&h.a.createElement(d.e,{textAlign:"center",px:"medium",py:Object(p.c)()?"medium":"small",gutterBottom:!0},h.a.createElement(d.s,{fontSize:"small",color:"gray_light"},h.a.createElement(d.f,{onClick:()=>{this.onShowCollapsedAnswersClick(l)}},h.a.createElement(u.Translate,null,h.a.createElement(u.FormattedNumber,{value:v}),h.a.createElement(u.PluralTranslate,{value:v},{ONE:" answer ",OTHER:" answers "}),"collapsed")),h.a.createElement(o.a,null),h.a.createElement(d.f,{onClick:()=>Object(g.c)(y)},h.a.createElement(s.a,null,h.a.createElement(u.Translate,null,"Why?"))))))}}y.fragments={question:void 0!==t?t:t=a("+/tN"),viewer:void 0!==r?r:r=a("LUMq")},y.queries={loadCollapsedAnswersSectionContent:new l["default"](()=>a.e("query-CollapsedAnswersSectionLoadContentQuery").then(a.bind(null,"hepq")),"CollapsedAnswersSectionLoadContentQuery")},y.displayName="CollapsedAnswersSection",n["default"]=Object(f.b)(y)},O7RO:function(e,n,a){var t=a("CMye"),r=a("7GkX");e.exports=function(e){for(var n=r(e),a=n.length;a--;){var l=n[a],s=e[l];n[a]=[l,s,t(s)]}return n}},Qqz5:function(e,n,a){"use strict";a.r(n);var t=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswersSectionInner_question",selections:[e,n,{alias:null,args:null,concreteType:"Answer",kind:"LinkedField",name:"collapsedAnswers",plural:!0,selections:[e,n,{alias:null,args:null,kind:"ScalarField",name:"aid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"topCollapsedReason",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVisibleToViewer",storageKey:null},{args:null,kind:"FragmentSpread",name:"CollapsedAnswerItem_answer"}],storageKey:null}],type:"Question",abstractKey:null}}();t.hash="ad14fd84b1b7e16c9eacbb53c99e887f",n["default"]=t},UMY1:function(e,n,a){var t=a("oMRN"),r=a("JD84"),l=a("ut/Y"),s=a("Z0cm");e.exports=function(e,n){return function(a,o){var i=s(a)?t:r,u=n?n():{};return i(a,e,l(o,2),u)}}},ZCpW:function(e,n,a){var t=a("lm/5"),r=a("O7RO"),l=a("IOzZ");e.exports=function(e){var n=r(e);return 1==n.length&&n[0][2]?l(n[0][0],n[0][1]):function(a){return a===e||t(a,e,n)}}},ZWtO:function(e,n,a){var t=a("4uTw"),r=a("9Nap");e.exports=function(e,n){for(var a=0,l=(n=t(n,e)).length;null!=e&&a<l;)e=e[r(n[a++])];return a&&a==l?e:undefined}},"bt/X":function(e,n,a){var t=a("hypo"),r=a("UMY1"),l=Object.prototype.hasOwnProperty,s=r((function(e,n,a){l.call(e,a)?e[a].push(n):t(e,a,[n])}));e.exports=s},hgQt:function(e,n,a){var t=a("Juji"),r=a("4sDh");e.exports=function(e,n){return null!=e&&r(e,n,t)}},hypo:function(e,n,a){var t=a("O0oS");e.exports=function(e,n,a){"__proto__"==n&&t?t(e,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[n]=a}},izyJ:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswerItem_viewer",selections:[{args:[{kind:"Literal",name:"skipFooter",value:!1}],kind:"FragmentSpread",name:"AnswerComponentBase_viewer"}],type:"Viewer",abstractKey:null,hash:"858758cd86befaf774c81a48724e1c35"};n["default"]=t},"lm/5":function(e,n,a){var t=a("fmRc"),r=a("wF/u");e.exports=function(e,n,a,l){var s=a.length,o=s,i=!l;if(null==e)return!o;for(e=Object(e);s--;){var u=a[s];if(i&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++s<o;){var c=(u=a[s])[0],d=e[c],m=u[1];if(i&&u[2]){if(d===undefined&&!(c in e))return!1}else{var f=new t;if(l)var p=l(d,m,c,e,n,f);if(!(p===undefined?r(m,d,3,l,f):p))return!1}}return!0}},mwIZ:function(e,n,a){var t=a("ZWtO");e.exports=function(e,n,a){var r=null==e?undefined:t(e,n);return r===undefined?a:r}},oMRN:function(e,n){e.exports=function(e,n,a,t){for(var r=-1,l=null==e?0:e.length;++r<l;){var s=e[r];n(t,s,a(s),e)}return t}},"ut/Y":function(e,n,a){var t=a("ZCpW"),r=a("GDhZ"),l=a("zZ0H"),s=a("Z0cm"),o=a("+c4W");e.exports=function(e){return"function"==typeof e?e:null==e?l:"object"==typeof e?s(e)?r(e[0],e[1]):t(e):o(e)}},v2f1:function(e,n,a){"use strict";var t;!function(e){e[e.none=0]="none",e[e.manualCollapsedSoft=100]="manualCollapsedSoft",e[e.lowAnswerScoreSoft=200]="lowAnswerScoreSoft",e[e.highGraySpamScoreSoft=250]="highGraySpamScoreSoft",e[e.moderationSoft=300]="moderationSoft",e[e.tribeRemovalHard=400]="tribeRemovalHard",e[e.duplicateAuthorHard=500]="duplicateAuthorHard",e[e.flaggedNameHard=600]="flaggedNameHard",e[e.moderationHard=700]="moderationHard"}(t||(t={})),n.a=t},w8Tj:function(e,n,a){"use strict";a.r(n);var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CollapsedAnswerItem_answer",selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"aid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content",storageKey:null},{args:[{kind:"Literal",name:"skipFooter",value:!1}],kind:"FragmentSpread",name:"AnswerComponentBase_answer"}],type:"Answer",abstractKey:null,hash:"22dad79455778add37cba8b5d5540a30"};n["default"]=t}}]);