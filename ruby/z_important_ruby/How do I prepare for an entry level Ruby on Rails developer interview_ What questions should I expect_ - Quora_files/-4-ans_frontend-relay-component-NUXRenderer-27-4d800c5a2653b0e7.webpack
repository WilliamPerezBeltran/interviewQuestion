(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-NUXRenderer"],{SpgY:function(e,t,n){"use strict";n.r(t),n.d(t,"nuxTransition",(function(){return j}));var a=n("eP4p"),l=n("EFAP"),r=n("jQ0q"),s=n("SKAY"),i=n("8lmh"),o=n("VyO/"),u=n("AaDK"),d=n("nwxp"),c=n("GLuq"),p=n("mF64"),m=n("UyMh"),g=n("q1tI"),h=n.n(g),f=n("RqIh"),b=n("jufJ"),y=n("noLW"),x=n("6lcX"),k=n("RA+f"),S=n("d1zJ");class w extends g.Component{constructor(e){super(e),this.state={currentStepIdx:0}}incrementStepIdx(){this.setState(e=>Object.assign({},e,{currentStepIdx:e.currentStepIdx+1}))}render(){const e=this.props.totalSteps,t=this.state.currentStepIdx,n=(this.state.currentStepIdx+1)/e*100+"%";return t<e&&h.a.createElement(k.i,{top:0,fullX:!0,zIndex:"modal_desktop",bg:"white",borderBottom:!0,boxShadow:"medium"},h.a.createElement(k.j,{width:x.d,mx:"auto",alignItems:"center",justifyContent:"space-between"},h.a.createElement(y.a,{color:"red",height:S.b}),h.a.createElement(k.n,{alignItems:"center"},h.a.createElement(k.e,null,h.a.createElement(k.s,{medium:!0},h.a.createElement(b.Translate,null,"Start"))),h.a.createElement(k.e,{px:"medium"},h.a.createElement(k.e,{bg:"gray",borderRadius:"pill",height:10,width:600},h.a.createElement(k.e,{bg:"blue",borderRadius:"pill",height:"100%",width:n,transition:"width",transitionDuration:"400ms"}))),h.a.createElement(k.e,null,h.a.createElement(k.s,{medium:!0},h.a.createElement(b.Translate,null,"Finish")))),h.a.createElement(k.e,{opacity:0},h.a.createElement(y.a,{color:"red",height:S.b}))))}}var F,_=n("V1RE");const j=e=>{var t;let n=e.flowData,a=e.showNextModal,l=e.dismissModalFlow;Object(u.a)("nux_step_completion",{step_name:n.stepNames[n.stepIdx]}),n.stepIdx+=1,null!==(t=n.headerRef)&&void 0!==t&&t.current&&n.headerRef.current.incrementStepIdx(),n.stepIdx>=n.stepNames.length?l():(n.isLastStep=n.stepIdx>=n.numInteractiveSteps-1,a({modalProps:{name:_.f[n.stepNames[n.stepIdx]],queryVariables:{stepType:n.stepNames[n.stepIdx]},desktopWidth:_.b,desktopHeight:_.a,desktopOverlayStyle:{backgroundColor:"white"}},replaceActiveModal:!0}))};class v extends h.a.Component{constructor(e){super(e),this.headerRef=void 0,this.shouldIncludeSpinnerStep=e=>s.isStorybook||s.isNpmRunStart||[f.a.answer,f.a.home_feed_main].includes(e),this.headerRef=h.a.createRef()}render(){const e=this.props.nux;if(!e)return null;if(!Object(_.e)(e.steps))return null;const t=e.steps.length,n=e.id,u=e.__typename;return h.a.createElement(l.d.Consumer,null,l=>{const g=!!l&&this.shouldIncludeSpinnerStep(l);return h.a.createElement(o.a,{mutation:v.mutations.nuxMarkComplete,variables:{},onCompleted:()=>{const e=Object(s.getSetting)("pageOid");if(Object(d.h)())Object(a.h)();else if(l!==f.a.answer||e||(Object(i.logJsError)("NUXRenderer",`Answer page doesn't have aid, given context:${e} URL: ${Object(p.b)().href}`),Object(m.c)(Object(c.g)("/"))),l===f.a.answer&&Object(m.c)("/?signup_answer_page="+e,"replace"),l===f.a.question_main){const e=Object(c.d)("/");e.query.from_signup=1,Object(m.c)(e)}},optimisticResponse:{nuxMarkComplete:{nux:{id:n,__typename:u,steps:[]},viewer:{showGoToFeedGrowl:!0}}}},n=>{return h.a.createElement(h.a.Fragment,null,Object(d.c)()&&h.a.createElement(w,{totalSteps:t+1,ref:this.headerRef}),h.a.createElement(r.a,{shouldPrefetch:Object(d.h)(),modalFlowProps:{initialModalProps:(a=e.steps[0].name,{name:_.f[a],queryVariables:{stepType:a},desktopWidth:_.b,desktopHeight:_.a,desktopOverlayStyle:{backgroundColor:"white"}}),initialFlowData:{stepIdx:0,numInteractiveSteps:t,stepNames:[...e.steps.map(e=>e.name),...g?["spinner"]:[]],isLastStep:t<2,headerRef:this.headerRef,pageType:l},containerProps:{legacy:!0,easyDismissEnabled:!1},dismissableBack:!1,transitionName:"NUXTransition",postDismissCallback:n}},e=>{let t=e.openModalFlow;return h.a.createElement(_.c,{openModalFlow:t})}));var a})})}}v.fragments={nux:void 0!==F?F:F=n("v5H7")},v.mutations={nuxMarkComplete:_.d},v.displayName="NUXRenderer";t["default"]=Object(o.b)(v)},V1RE:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return c})),n.d(t,"f",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return b}));var a,l=n("J4zp"),r=n.n(l),s=n("SKAY"),i=n("AaDK"),o=n("qy3/"),u=n("q1tI");const d="760px",c="550px",p={follow_interests:"FollowInterestsStep",language:"LanguageStep",download_app:"DownloadAppStep",spinner:"SpinnerStep"},m=[["index","index"],["question","q"],["question","answer"],["topic","t"]],g=()=>!!(()=>{let e=!1;for(const n of m){var t=r()(n,2);const a=t[0],l=t[1];a===Object(s.getSetting)("controller")&&l===Object(s.getSetting)("action")&&(e=!0)}return e})()&&!Object(s.getSetting)("getParams").digest_story,h=e=>Object(o.c)(e)&&g(),f=e=>{let t=e.openModalFlow;return Object(u.useEffect)(()=>{Object(i.a)("nux_start",{}),t()},[t]),null},b=void 0!==a?a:a=n("jX9V")},jX9V:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},n={alias:null,args:null,concreteType:"NUX",kind:"LinkedField",name:"nux",plural:!1,selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t],storageKey:null}],storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"showGoToFeedGrowl",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"nuxUtils_nuxMarkComplete_Mutation",selections:[{alias:null,args:null,concreteType:"NuxMarkComplete",kind:"LinkedField",name:"nuxMarkComplete",plural:!1,selections:[n,{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[a,e],storageKey:null}],storageKey:null}]},params:{id:"a6d7246182f57758f28d7429944b38acadc5d748dd77a0e1ff1864508308a3fb",metadata:{},name:"nuxUtils_nuxMarkComplete_Mutation",operationKind:"mutation",text:null}}}();a.hash="224397605c2cc50bffba1864a365598f",t["default"]=a},v5H7:function(e,t,n){"use strict";n.r(t);var a=function(){var e={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"NUXRenderer_nux",selections:[e,t,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"steps",plural:!0,selections:[e,t,{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"NUX",abstractKey:null}}();a.hash="8c29d0d10ed3a46bd9362f6188158a5b",t["default"]=a}}]);