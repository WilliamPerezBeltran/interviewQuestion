(window.ansFrontendRelayWebpackJsonpFunction=window.ansFrontendRelayWebpackJsonpFunction||[]).push([["component-LightweightSurvey"],{"2xqg":function(e,n,t){var a=t("UNi/"),r=t("EwQA"),i=t("Sxd8"),o=Math.min;e.exports=function(e,n){if((e=i(e))<1||e>9007199254740991)return[];var t=4294967295,s=o(e,4294967295);n=r(n),e-=4294967295;for(var l=a(s,n);++t<e;)n(t);return l}},"7g1x":function(e,n,t){"use strict";var a=t("q1tI");const r=t.n(a).a.createContext(null);r.displayName="MultifeedPageContext",n.a=r},"8XVe":function(e,n,t){"use strict";var a=t("J4zp"),r=t.n(a),i=t("jufJ"),o=t("RA+f"),s=t("nwxp"),l=t("2xqg"),u=t.n(l),c=t("o8/o"),d=t("q1tI"),p=t("uDJk"),m=t("OMLc");const y=e=>{switch(e){case 0:return"SmileyFrown";case 1:return"SmileySad";case 2:return"SmileyNeutral";case 3:return"SmileyHappy";case 4:return"SmileySmile";default:return Object(c.a)("Unsupported icon index: "+e),"SmileyNeutral"}},f=e=>{let n=e.forceMobileLayout,t=void 0!==n&&n,a=e.isProminent,l=e.onSelect,f=e.storyHash,b=e.oneStarLabel,g=void 0===b?d.createElement(i.Translate,null,"Absolutely not"):b,v=e.neutralLabel,h=e.fiveStarLabel,w=void 0===h?d.createElement(i.Translate,null,"Definitely yes"):h,x=e.variant,S=void 0===x?"star":x;const E=d.useState(null),O=r()(E,2),j=O[0],k=O[1],T=Object(s.f)();return d.createElement(o.j,{alignItems:"center",flexDirection:"column",width:T||t?"100%":undefined,px:t?undefined:"small"},d.createElement(o.j,{justifyContent:t?"space-evenly":"space-around",alignItems:"flex-start",mt:T||t?undefined:"tiny",px:t?undefined:T?"medium":"small",width:t?"100%":undefined,cursor:"pointer"},u()(5,e=>{const n=null!==j&&e<=j;return d.createElement(o.j,{onClick:n=>{k(e);const t=(e=>{switch(e){case 0:return p.a.one;case 1:return p.a.two;case 2:return p.a.three;case 3:return p.a.four;case 4:return p.a.five;case 5:return p.a.yes;case 6:return p.a.no;default:return Object(c.a)("Unsupported survey response: "+e),p.a.no}})(e);l({rating:t,ratingNumber:e+1}),n.stopPropagation()},onMouseEnter:()=>{!T&&k(e)},onMouseLeave:()=>{!T&&k(null)},px:t?undefined:T?"small":"tiny",key:`${f}${e}`},d.createElement(m.c,{name:"star"===S?"Star":y(e),size:T?36:28,isFilled:n,color:"blue"}))})),d.createElement(o.j,{justifyContent:t?undefined:"space-between",width:"100%",mt:T||t?"tiny":undefined},g&&d.createElement(o.s,{fontSize:"tiny",color:a?"blue":"gray_light",textAlign:"left",flex:1,mr:"small"},g),v&&d.createElement(o.s,{fontSize:"tiny",color:a?"blue":"gray_light",textAlign:"center",width:"100%",flex:1,mx:"tiny"},v),w&&d.createElement(o.s,{fontSize:"tiny",color:a?"blue":"gray_light",textAlign:"right",width:"100%",flex:1,ml:"small"},w)))};f.displayName="LightweightSurveyStarSelector",n.a=f},CKNS:function(e,n,t){"use strict";t.r(n);var a=function(){var e={defaultValue:null,kind:"LocalArgument",name:"contentOid"},n={defaultValue:null,kind:"LocalArgument",name:"contentType"},t={defaultValue:null,kind:"LocalArgument",name:"pageType"},a={defaultValue:null,kind:"LocalArgument",name:"response"},r={defaultValue:null,kind:"LocalArgument",name:"surveyVersion"},i=[{kind:"Variable",name:"contentOid",variableName:"contentOid"},{kind:"Variable",name:"contentType",variableName:"contentType"},{kind:"Variable",name:"pageType",variableName:"pageType"},{kind:"Variable",name:"response",variableName:"response"},{kind:"Variable",name:"surveyVersion",variableName:"surveyVersion"}],o={alias:null,args:null,kind:"ScalarField",name:"viewerHasRepliedToSurvey",storageKey:null};return{fragment:{argumentDefinitions:[e,n,t,a,r],kind:"Fragment",metadata:null,name:"LightweightSurveyInner_setSurveyResponse_Mutation",selections:[{alias:null,args:i,concreteType:"SetSurveyResponse",kind:"LinkedField",name:"setSurveyResponse",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"surveyable",plural:!1,selections:[o],storageKey:null}],storageKey:null}],type:"MutationRoot",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,n,a,r,t],kind:"Operation",name:"LightweightSurveyInner_setSurveyResponse_Mutation",selections:[{alias:null,args:i,concreteType:"SetSurveyResponse",kind:"LinkedField",name:"setSurveyResponse",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"surveyable",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},o,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"49d48fc4261255e713b501e3576d0ac960b6700f70f4e60bcf9145f1bd05c2ca",metadata:{},name:"LightweightSurveyInner_setSurveyResponse_Mutation",operationKind:"mutation",text:null}}}();a.hash="1e1df4b471e9e6b99ce58b7fa8c58409",n["default"]=a},EoXg:function(e,n,t){"use strict";var a;!function(e){e.one="one",e.binary="binary",e.stars="stars",e.stars_prominent="stars_prominent"}(a||(a={})),n.a=a},LPLf:function(e,n,t){"use strict";t.r(n);var a,r=t("J4zp"),i=t.n(r),o=t("7g1x"),s=t("jufJ"),l=t("EFAP"),u=t("Gnru"),c=t("VyO/"),d=t("AaDK"),p=t("q1tI"),m=t.n(p),y=t("UDrg"),f=t("Nka6"),b=t("1QBy");!function(e){e.new_answer_or_post="new_answer_or_post"}(a||(a={}));var g=a;const v=new Map([[g.new_answer_or_post,1]]);new Map([[1,g.new_answer_or_post]]);function h(e){return v.get(g[e])}var w=t("uDJk");new Map([[w.a.one,1],[w.a.two,2],[w.a.three,3],[w.a.four,4],[w.a.five,5],[w.a.yes,6],[w.a.no,7]]);const x=new Map([[1,w.a.one],[2,w.a.two],[3,w.a.three],[4,w.a.four],[5,w.a.five],[6,w.a.yes],[7,w.a.no]]);function S(e){if(null===e)return null;if("number"===typeof e){const n=x.get(e);if(!n)throw new Error(e+" is not a valid SurveyResponse");return n}return"string"===typeof e?w.a[e]:e}var E,O=t("EoXg"),j=t("Xqb6"),k=t("ysDQ"),T=t("8XVe"),_=t("WwW4"),L=t("g/SX"),F=t("LNH1");const I=(e,n)=>{if(n===y.a.ad){if(e===_.a.feedStory)return Object(s.plaintextForceEnglishForCopyDrafting)("Is this ad relevant to you?");if(e===_.a.questionPage)return Object(s.plaintextForceEnglishForCopyDrafting)("Is this ad relevant to you?")}return e===_.a.questionStory?Object(s.plaintextTranslate)("Is this question thoughtful and appropriate for Quora?"):(_.a.questionPage,Object(s.plaintextTranslate)("Was this worth your time?"))},R=(e,n)=>n===y.a.ad?Object(s.plaintextForceEnglishForCopyDrafting)("This helps us show better ads for you."):e===_.a.questionStory?Object(s.plaintextTranslate)("This will help us show better questions to everyone."):e===_.a.questionPage?Object(s.plaintextTranslate)("This helps us sort answers on the page."):Object(s.plaintextTranslate)("This helps us show content you find valuable."),V={setSurveyResponse:void 0!==E?E:E=t("CKNS")},M=e=>{var n;let t=e.surveyType,a=void 0===t?_.a.feedStory:t,r=e.contentType,d=e.contentOid,p=e.isSelected,f=e.eligibleForDisplay,g=e.isExpanded,v=void 0!==g&&g,h=e.bundleType,w=e.reason;const x=m.a.useContext(k.a),E=m.a.useContext(l.d),M=Object(F.h)().setToast,q=m.a.useContext(o.a),C=Object(b.a)(E),A=null===q||void 0===q?void 0:q.multifeedPage,z=m.a.useState(!0),K=i()(z,2),H=K[0],J=K[1],P=Object(k.c)(E),X=null===(n=Object(u.useCurrentMetadata)()())||void 0===n?void 0:n.feed_story_hash,Q=O.a.stars_prominent;if(!H||!P||!p||!x.isInFeed&&!f)return null;return m.a.createElement(L.a,{title:I(a,r),description:R(a,r),isExpanded:v,onImpression:()=>{N(C,r,d,v,X,Object(j.b)(Q),w,h)}},m.a.createElement(T.a,{storyHash:X,isProminent:!0,onSelect:e=>{let n=e.rating;Object(c.c)({mutation:V.setSurveyResponse,variables:{contentOid:d,contentType:r,response:S(n),surveyVersion:Object(j.a)(Q),pageType:A}}),D(n,C,r,d,v,X,Object(j.b)(Q),w,h),M((e=>e===y.a.ad?Object(s.plaintextForceEnglishForCopyDrafting)("Thanks, your feedback helps us show ads that are better for you."):Object(s.plaintextTranslate)("Thanks, your feedback helps us show you content you care about."))(r)),J(!1)}}))};M.displayName="LightweightSurvey";const N=(e,n,t,a,r,i,o,s)=>{Object(d.a)("survey_impression",{surveyVersion:i,storyHash:r,contentType:Object(f.b)(n),pageType:e,contentOid:t,isExpanded:a,reason:o?h(o):null,bundleName:s})},D=(e,n,t,a,r,i,o,s,l)=>{Object(d.a)("survey_response",{response:e,surveyVersion:o,storyHash:i,pageType:n,contentType:Object(f.b)(t),contentOid:a,isExpanded:r,reason:s?h(s):null,bundleName:l})};n["default"]=M},Xqb6:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"a",(function(){return s}));var a=t("EoXg");const r=new Map([[a.a.one,1],[a.a.binary,2],[a.a.stars,3],[a.a.stars_prominent,4]]),i=new Map([[1,a.a.one],[2,a.a.binary],[3,a.a.stars],[4,a.a.stars_prominent]]);function o(e){return r.get(a.a[e])}function s(e){if(null===e)return null;if("number"===typeof e){const n=i.get(e);if(!n)throw new Error(e+" is not a valid SurveyVersion");return n}return"string"===typeof e?a.a[e]:e}},"g/SX":function(e,n,t){"use strict";var a=t("jufJ"),r=t("Yc5t"),i=t("RA+f"),o=t("nwxp"),s=t("q1tI"),l=t.n(s),u=t("OMLc"),c=t("VwdU");const d=e=>{let n=e.children,t=e.title,s=e.description,d=e.onImpression,p=e.isExpanded,m=void 0!==p&&p,y=e.haveDisclaimer,f=void 0===y||y,b=e.borderRadius,g=e.marginTop;const v=l.a.useRef("0px 0px 0px 0px");return l.a.useEffect(()=>{const e=window.innerHeight/8;v.current=e>0?`-${e}px 0px -${e}px 0px`:"0px"}),l.a.createElement(c.a,{condition:m&&!Object(o.h)(),wrapper:e=>l.a.createElement(r.a,{rootMargin:v.current,onImpression:d},e)},l.a.createElement(r.a,{rootMargin:v.current,onImpression:d},l.a.createElement(i.e,{overflow:"hidden"},l.a.createElement(i.j,{borderAll:!0,borderRadius:b||"medium",borderColor:"blue",mb:"small",mt:g||"medium",p:"small",alignItems:"center",boxShadow:"small",position:"relative",bg:"blue_light",minHeight:s?60:50,flexDirection:Object(o.f)()?"column":"row"},l.a.createElement(i.e,{flex:1,mr:Object(o.c)()?"medium":undefined,alignSelf:Object(o.f)()?"flex-start":undefined,mb:Object(o.f)()?"small":undefined},f&&l.a.createElement(i.a,{top:0,right:"small",zIndex:10,className:"aehbk59"},l.a.createElement(i.n,{px:"tiny",py:"tiny",borderRadius:"small",position:"relative"},l.a.createElement(i.a,{bottom:0,fullX:!0,bg:"blue_light",top:"calc(50% - 10px)",display:"block",zIndex:1,borderRadius:"pill"}),l.a.createElement(i.n,{alignItems:"center",position:"relative",zIndex:2},l.a.createElement(u.c,{size:14,name:"Lock",mr:"tiny",color:"blue"}),l.a.createElement(i.s,{fontSize:"tiny",color:"blue",lineHeight:1},Object(a.plaintextTranslate)("Your response is private"))))),l.a.createElement(i.s,{medium:!0,color:"blue"},t),s&&l.a.createElement(i.s,{fontSize:"small",color:"blue"},s)),n))))};d.displayName="LightweightSurveyWrapper",n.a=d,t("wQT8")},uDJk:function(e,n,t){"use strict";var a;!function(e){e.one="one",e.two="two",e.three="three",e.four="four",e.five="five",e.yes="yes",e.no="no"}(a||(a={})),n.a=a},wQT8:function(e,n,t){"use strict";t.r(n)}}]);